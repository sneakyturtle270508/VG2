<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lappen AI - Learning Notes</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Login/Register Screen -->
    <div id="auth-screen" class="screen">
      <div class="auth-container">
        <h1>Lappen AI</h1>
        <div class="auth-tabs">
          <button class="tab active" data-tab="login">Login</button>
          <button class="tab" data-tab="register">Register</button>
        </div>
        <div id="login-form" class="auth-form active">
          <input
            type="text"
            id="login-username"
            placeholder="Username"
            autocomplete="username"
          />
          <input
            type="password"
            id="login-password"
            placeholder="Password"
            autocomplete="current-password"
          />
          <button onclick="login()">Login</button>
          <p id="auth-error" class="error"></p>
        </div>
        <div id="register-form" class="auth-form">
          <input
            type="text"
            id="register-username"
            placeholder="Username"
            autocomplete="username"
          />
          <input
            type="password"
            id="register-password"
            placeholder="Password"
            autocomplete="new-password"
          />
          <button onclick="register()">Register</button>
          <p id="register-error" class="error"></p>
        </div>
      </div>
    </div>

    <!-- Main App Screen -->
    <div id="app-screen" class="screen hidden">
      <header>
        <div class="header-top">
          <h1>Lappen AI</h1>
          <div class="user-menu-container">
            <button
              onclick="toggleUserMenu()"
              class="user-icon-btn"
              id="user-icon-btn"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              <span id="username-display" class="username-display"></span>
            </button>
            <div id="user-menu" class="user-menu hidden">
              <div class="user-menu-header">
                <div class="user-info">
                  <div class="user-avatar">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                      ></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                  </div>
                  <div>
                    <div
                      class="user-menu-username"
                      id="user-menu-username"
                    ></div>
                    <div class="user-menu-email">User Account</div>
                  </div>
                </div>
              </div>
              <div class="user-menu-divider"></div>
              <button onclick="showUserSettings()" class="user-menu-item">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="3"></circle>
                  <path
                    d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m8.24 8.24l-4.24-4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m8.24-8.24l-4.24 4.24"
                  ></path>
                </svg>
                Settings
              </button>
              <button
                onclick="logout()"
                class="user-menu-item logout-menu-item"
              >
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                  <polyline points="16 17 21 12 16 7"></polyline>
                  <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Logout
              </button>
            </div>
          </div>
        </div>
        <div class="header-actions">
          <button
            onclick="showNotes()"
            class="nav-btn active"
            data-view="notes"
          >
            Notes
          </button>
          <button
            onclick="showFlashcards()"
            class="nav-btn"
            data-view="flashcards"
          >
            Flashcards
          </button>
          <button
            onclick="showQuestions()"
            class="nav-btn"
            data-view="questions"
          >
            Questions
          </button>
        </div>
      </header>

      <main>
        <!-- Notes View -->
        <div id="notes-view" class="view active">
          <div class="notes-header">
            <h2>My Notes</h2>
            <button onclick="createNewNote()" class="btn-primary">
              + New Note
            </button>
          </div>
          <div id="notes-list" class="notes-list"></div>
        </div>

        <!-- Note Editor -->
        <div id="note-editor" class="view hidden">
          <div class="editor-header">
            <button onclick="closeEditor()" class="btn-back">← Back</button>
            <div class="editor-actions">
              <button onclick="generateFlashcards()" class="btn-secondary">
                Generate Flashcards
              </button>
              <button onclick="generateQuestions()" class="btn-secondary">
                Generate Questions
              </button>
              <button onclick="saveNote()" class="btn-primary">Save</button>
            </div>
          </div>
          <textarea
            id="note-content"
            placeholder="Write your notes here..."
          ></textarea>
        </div>

        <!-- Flashcards View -->
        <div id="flashcards-view" class="view hidden">
          <div class="flashcards-header">
            <h2>Flashcards</h2>
          </div>
          <div id="flashcards-list" class="flashcards-container"></div>
        </div>

        <!-- Questions View -->
        <div id="questions-view" class="view hidden">
          <div class="questions-header">
            <h2>Practice Questions</h2>
          </div>
          <div id="questions-list" class="questions-container"></div>
        </div>

        <!-- User Settings View -->
        <div id="settings-view" class="view hidden">
          <div class="settings-header">
            <button onclick="closeSettings()" class="btn-back">← Back</button>
            <h2>Settings</h2>
          </div>
          <div class="settings-content">
            <div class="settings-section">
              <h3>Account Information</h3>
              <div class="settings-item">
                <label>Username</label>
                <div class="settings-value" id="settings-username"></div>
              </div>
              <div class="settings-item">
                <label>Account Created</label>
                <div class="settings-value" id="settings-created"></div>
              </div>
            </div>
            <div class="settings-section">
              <h3>Preferences</h3>
              <div class="settings-item">
                <label>Theme</label>
                <select
                  id="theme-select"
                  class="settings-select"
                  onchange="changeTheme()"
                >
                  <option value="light">Light</option>
                  <option value="dark">Dark</option>
                  <option value="auto">Auto</option>
                </select>
              </div>
              <div class="settings-item">
                <label>AI Learning Context</label>
                <select
                  id="context-select"
                  class="settings-select"
                  onchange="changeContext()"
                >
                  <option value="">Loading...</option>
                </select>
                <div class="context-description" id="context-description"></div>
              </div>
            </div>
            <div class="settings-section">
              <h3>Data</h3>
              <div class="settings-item">
                <label>Export Data</label>
                <button onclick="exportData()" class="btn-secondary">
                  Export All Notes
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="app.js"></script>
  </body>
</html>
